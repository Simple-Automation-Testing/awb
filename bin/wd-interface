#!/usr/bin/env node

process.title = 'wd-interface'

const {
  getChromeDriver,
  writeId,
  killProc,
  getStandalone,
  clearChrome,
  clearStandalone,
  getGeckoDriver,
  spawnStandalone,
  spawnGeckodriver,
  spawnChromedriver
 } = require('../macOSinstaller')

// wd install

const args = process.argv.slice(2)

try {
  if (args.includes('chrome') && args.includes('standalone') && args.includes('gecko')) {
    getChromeDriver('2.34').then(getStandalone).then(getGeckoDriver)
  } else if (args.includes('chrome') && args.includes('standalone')) {
    getChromeDriver('2.34').then(getStandalone)
  } else if (args.includes('gecko') && args.includes('standalone')) {
    getGeckoDriver().then(getStandalone)
  } else if (args.includes('start') && args.includes('chrome')) {
    spawnChromedriver().then(writeId)
  } else if (args.includes('gecko') && args.includes('start')) {
    spawnGeckodriver().then(writeId)
  } else if (args.includes('start') && args.includes('standalone')) {
    spawnStandalone().then(writeId)
  } else if (args.includes('standalone')) {
    getStandalone()
  } else if (args.includes('clear') && args.includes('all')) {
    clearChrome('2.34').then(clearStandalone)
  } else if (args.includes('killsession')) {
    killProc()
  } else if (args.includes('chrome')) {
    getChromeDriver('2.34')
  } else if (args.includes('gecko')) {
    getGeckoDriver()
  }
} catch (error) {
  console.error(error.toString())
}

